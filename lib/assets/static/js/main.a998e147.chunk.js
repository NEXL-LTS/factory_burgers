(this["webpackJsonpfactory_burgers-ui"]=this["webpackJsonpfactory_burgers-ui"]||[]).push([[0],{31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),i=n.n(c),o=(n(31),n(32),n(33),n(34),n(1));var s=function(){return Object(o.jsx)("div",{children:"86 on that ... something went wrong."})};var u=function(){return Object(o.jsx)("div",{children:"Coming right up..."})},l=n(12),b=n.n(l),j=n(15),d=n(7),f=n(9),m=n(8),h=n.n(m),O=h.a.shape({name:h.a.string.isRequired}),v=h.a.shape({name:h.a.string.isRequired}),p=(h.a.shape({attributes:h.a.arrayOf(O),name:h.a.string.isRequired,traits:h.a.arrayOf(v)}),n(24)),x=n(5),g=n(17),y=n(10);var w=function(e){return Object(o.jsxs)(x.a.Row,{children:[Object(o.jsxs)(y.a,{children:[Object(o.jsx)(x.a.Label,{children:"Attribute Name"}),Object(o.jsxs)(x.a.Control,{as:"select",disabled:e.disabled,name:"attributes[][name]",className:"form-control",value:e.attribute.name,onChange:function(t){return e.onChangeName(t)},children:[Object(o.jsx)("option",{value:e.attribute.name,children:e.attribute.name}),e.children]})]}),Object(o.jsxs)(y.a,{children:[Object(o.jsx)(x.a.Label,{children:"Value"}),Object(o.jsx)("input",{disabled:e.disabled||!e.attribute.name,name:"attributes[][value]",className:"form-control",value:e.attribute.value,onChange:function(t){return e.onChangeValue(t)}})]})]})};var C=function(e){var t=e.attributes,n=Object(a.useState)([]),r=Object(d.a)(n,2),c=r[0],i=r[1],s=Object(a.useMemo)((function(){return function(e,t){var n=new Set(t.map((function(e){return e.name})));return e.filter((function(e){return!n.has(e.name)}))}(t,c)}),[t,c]).map((function(e){return Object(o.jsx)("option",{value:e.name,children:e.name},e.name)}));function u(e){var t=e.name,n=e.value;i([].concat(Object(g.a)(c),[{name:t,value:n}]))}function l(e,t){var n=c.slice();n.splice(e,1,t),i(n)}return Object(o.jsxs)(x.a.Group,{controlId:"factories.Traits",children:[Object(o.jsx)(x.a.Label,{children:"Pickles or onions?"}),c.map((function(t,n){return Object(o.jsx)(w,{attribute:t,disabled:e.disabled,onChangeName:function(e){return function(e,t){l(e,{name:t.target.value,value:c[e].value})}(n,e)},onChangeValue:function(e){return function(e,t){l(e,{name:c[e].name,value:t.target.value})}(n,e)},children:s},n)})),Object(o.jsx)(w,{attribute:{name:"",value:""},disabled:e.disabled,onChangeName:function(e){return u({name:e.target.value,value:""})},onChangeValue:function(e){return u({name:"",value:e.target.value})},children:s},c.length+1)]})};var N=function(e){return Object(o.jsxs)(x.a.Row,{children:[Object(o.jsxs)(y.a,{children:[Object(o.jsx)(x.a.Label,{children:"Transient Name"}),Object(o.jsxs)(x.a.Control,{as:"select",disabled:e.disabled,name:"attributes[][name]",className:"form-control",value:e.attribute.name,onChange:function(t){return e.onChangeName(t)},children:[Object(o.jsx)("option",{value:e.attribute.name,children:e.attribute.name}),e.children]})]}),Object(o.jsxs)(y.a,{children:[Object(o.jsx)(x.a.Label,{children:"Value"}),Object(o.jsx)("input",{disabled:e.disabled||!e.attribute.name,name:"attributes[][value]",className:"form-control",value:e.attribute.value,onChange:function(t){return e.onChangeValue(t)}})]})]})};var k=function(e){var t=e.attributes,n=Object(a.useState)([]),r=Object(d.a)(n,2),c=r[0],i=r[1],s=Object(a.useMemo)((function(){return function(e,t){var n=new Set(t.map((function(e){return e.name})));return e.filter((function(e){return!n.has(e.name)}))}(t,c)}),[t,c]).map((function(e){return Object(o.jsx)("option",{value:e.name,children:e.name},e.name)}));function u(e){var t=e.name,n=e.value;i([].concat(Object(g.a)(c),[{name:t,value:n}]))}function l(e,t){var n=c.slice();n.splice(e,1,t),i(n)}return Object(o.jsxs)(x.a.Group,{controlId:"factories.Traits",children:[Object(o.jsx)(x.a.Label,{children:"Ketchup or bbq sauce?"}),c.map((function(t,n){return Object(o.jsx)(N,{attribute:t,disabled:e.disabled,onChangeName:function(e){return function(e,t){l(e,{name:t.target.value,value:c[e].value})}(n,e)},onChangeValue:function(e){return function(e,t){l(e,{name:c[e].name,value:t.target.value})}(n,e)},children:s},n)})),Object(o.jsx)(N,{attribute:{name:"",value:""},disabled:e.disabled,onChangeName:function(e){return u({name:e.target.value,value:""})},onChangeValue:function(e){return u({name:"",value:e.target.value})},children:s},c.length+1)]})};function S(e,t){return t?"".concat(e.association," (").concat(e.factory.name,", ").concat(e.factory.class_name,")"):"".concat(e.factory.name," (").concat(e.factory.class_name,")")}var L=function(e){var t=e.options,n=e.label,a=e.value,r=e.onChange,c=e.owner;return Object(o.jsxs)(x.a.Group,{controlId:"factories.FactorySelect",children:[Object(o.jsx)(x.a.Label,{children:n}),Object(o.jsx)("input",{name:"factory",list:"factories",autoComplete:"off",className:"form-control",value:a,onChange:r}),Object(o.jsx)("datalist",{id:"factories",children:t.map((function(e){return Object(o.jsx)("option",{value:e.factory.name,children:S(e,c)},S(e,c))}))})]})};var M=function(e){var t=e.association,n=e.owner;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(x.a.Group,{controlId:"factories.OwnerType",children:Object(o.jsx)(x.a.Control,{type:"hidden",value:n&&n.type||"",name:"owner_type"})}),Object(o.jsx)(x.a.Group,{controlId:"factories.OwnerId",children:Object(o.jsx)(x.a.Control,{type:"hidden",value:n&&n.id||"",name:"owner_id"})}),Object(o.jsx)(x.a.Group,{controlId:"factories.OwnerReflection",children:Object(o.jsx)(x.a.Control,{type:"hidden",value:t||"",name:"owner_association"})})]})};var _=f.a.create({traits:{display:"flex",flexDirection:"column",flexWrap:"wrap",maxHeight:"6em"}}),T=function(e){var t=e.traits;return Object(o.jsxs)(x.a.Group,{controlId:"factories.Traits",children:[Object(o.jsx)(x.a.Label,{children:"How would you like that cooked?"}),Object(o.jsx)("div",{className:Object(f.b)(_.traits),children:t.map((function(t){return Object(o.jsx)(x.a.Check,{type:"checkbox",disabled:e.disabled,id:t.name,name:"traits[".concat(t.name),label:t.name},t.name)}))})]})};function I(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}var R=f.a.create({buttons:{display:"flex",justifyContent:"space-between"}}),F=function(e){var t=e.owner,n=e.inquiry||"What'll it be?",r=Object(a.useState)(""),c=Object(d.a)(r,2),i=c[0],s=c[1],u=Object(a.useMemo)((function(){return e.blueprints||[]}),[e.blueprints]),l=Object(a.useMemo)((function(){return function(e,t){var n={};return e.forEach((function(e){return n[t(e)]=e})),n}(u,(function(e){return e.factory.name}))}),[u]),b=Object(a.useMemo)((function(){return l[i]}),[i,l]),j=Object(a.useMemo)((function(){return b&&b.factory.attributes||[]}),[b]),m=Object(a.useMemo)((function(){return b&&b.factory.transients||[]}),[b]),h=Object(a.useMemo)((function(){return b&&b.factory.traits||[]}),[b]),O=!!b,v=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current}(e.owner);Object(a.useEffect)((function(){(function(e,t){var n=e&&e.type,a=e&&e.id,r=t&&t.type,c=t&&t.id;return n===r&&a===c})(e.owner,v)||s("")}),[e.owner,v]);var g=Object(a.useRef)(null);return Object(o.jsxs)(x.a,{ref:g,onSubmit:e.handleSubmit,children:[Object(o.jsx)(L,{options:u,label:n,value:i,onChange:function(e){var t=e.target.value;s(t)},owner:t}),Object(o.jsx)(M,{owner:t,association:b&&b.association}),h.length>0&&Object(o.jsx)(T,{disabled:e.disabled,traits:h}),m.length>0&&Object(o.jsx)(k,{disabled:e.disabled,attributes:m}),j.length>0&&Object(o.jsx)(C,{disabled:e.disabled,attributes:j}),Object(o.jsxs)("div",{className:Object(f.b)(R.buttons),children:[Object(o.jsx)(p.a,{variant:"outline-dark",className:"btn-primary",disabled:e.disabled||!O,type:"submit",children:"Gimme!"}),Object(o.jsx)(p.a,{variant:"outline-dark",className:"btn-danger",disabled:e.disabled,onClick:function(){g.current&&g.current.reset(),s(""),e.startOver()},type:"button",children:"Start Over"})," "]})]})},G=n(26);var V=function(e){var t=e.message||"Something went wrong";return Object(o.jsx)(G.a,{variant:"danger",children:t})};var D=function(){return Object(o.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",children:Object(o.jsxs)("g",{"stroke-width":"2.1",stroke:"#666",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",children:[Object(o.jsx)("polyline",{points:"17 13.5 17 19.5 5 19.5 5 7.5 11 7.5"}),Object(o.jsx)("path",{d:"M14,4.5 L20,4.5 L20,10.5 M20,4.5 L11,13.5"})]})})};var P=f.a.create({active:{boxShadow:"5px 5px 0px #333"},object:{border:"2px solid #222",borderRadius:"1em",display:"flex",flexDirection:"column",padding:"0.5em",marginRight:"0.5em",position:"relative",cursor:"pointer",transition:"background-color 0.2s"},objectDetails:{flex:1,width:"100%"},objectTitle:{flex:0,width:"100%",borderBottom:"2px solid #222",marginBottom:"3px"}}),q=function(e){var t=e.object,n=void 0===t?{}:t,a=n.attributes||{},r=function(e){var t=e.isNew,n=e.isActive;return t?"created":n?"selected":null}({isNew:e.new,isActive:e.active});return Object(o.jsxs)("div",{className:I(Object(f.b)(P.object,e.active&&P.active),r,"background-mayo hoverable"),onClick:e.activate,children:[Object(o.jsxs)("div",{className:Object(f.b)(P.objectTitle),children:[n.type,n.link&&Object(o.jsx)("a",{href:n.link,target:"_blank",rel:"noopener noreferrer",className:"ml-1",children:Object(o.jsx)(D,{})})]}),Object(o.jsx)("div",{className:Object(f.b)(P.objectDetails),children:Object.entries(a).map((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];return Object(o.jsx)("div",{children:"".concat(n,": ").concat(a)},n)}))})]})};var B=function(){return Object(o.jsx)("div",{className:"under-construction",children:Object(o.jsx)(q,{object:{type:"building..."}})})};var E=f.a.create({form:{marginBottom:"2em",transition:"opacity 0.5s ease-out",overflow:"hidden"},objectList:{display:"flex",margin:"0.5em 0 1em"}}),A=function(e){var t,n=e.factories,r=Object(a.useState)(!1),c=Object(d.a)(r,2),i=c[0],s=c[1],u=Object(a.useState)(null),l=Object(d.a)(u,2),m=l[0],h=l[1],O=Object(a.useState)(!1),v=Object(d.a)(O,2),p=v[0],x=v[1],g=Object(a.useState)(null),y=Object(d.a)(g,2),w=y[0],C=y[1],N=Object(a.useState)([].concat([])),k=Object(d.a)(N,2),S=k[0],L=k[1],M=Object(a.useState)(null),_=Object(d.a)(M,2),T=_[0],I=_[1],R=n.map((function(e){return{factory:e}})),G=null!==T&&S.length>0&&S[T],D=Object(a.useMemo)((function(){return G&&G.association_factories?G.association_factories.map((function(e){return function(e,t){return{factory:e.find((function(e){return e.name===t.factory_name})),association:t.association_name}}(n,e)})):[]}),[n,G]),P=G?D:R,A=G?"Would you like fries with that ".concat(G.type,"?"):null;function J(){return(J=Object(j.a)(b.a.mark((function t(n){var a,r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.submitPath,t.next=3,fetch(a,{method:"POST",body:n});case 3:return r=t.sent,t.next=6,r.json();case 6:c=t.sent,r.ok?H(c):(console.error(JSON.stringify(c)),U(c.error||"Uh oh, something broke."));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function H(e){e.ok?(console.log(JSON.stringify(e)),function(e){s(!1),h(null),x(!1),L(S.slice().concat([e])),0===S.length&&I(0);C(S.length)}(e.data)):(console.error(e.error),U(e.error||"Uh oh, something went wrong."))}function U(e){s(!1),h(e),x(!1)}return Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)("h2",{children:"Order Up!"}),(i||S.length>0)&&Object(o.jsxs)(o.Fragment,{children:[i?"Comin' right up!":"Here you go!",S.length>1&&Object(o.jsxs)("span",{children:[" ","P.S. -- select any object to build out its dependencies."]}),Object(o.jsxs)("div",{className:Object(f.b)(E.objectList),children:[S.map((function(e,t){return Object(o.jsx)(q,{object:e,active:T===t,activate:function(){return function(e){C(null),I(e)}(t)},new:w===t},t)})),i&&Object(o.jsx)(B,{})]})]}),m&&Object(o.jsx)(V,{message:m}),Object(o.jsx)("div",{className:Object(f.b)(E.form),children:Object(o.jsx)(F,{owner:G?(t=G,{type:t.type,id:t.attributes.id}):null,blueprints:P,disabled:p,handleSubmit:function(e){var t;e.preventDefault(),s(!0),h(null),x(!0),function(e){J.apply(this,arguments)}((t=e.target,new FormData(t)))},startOver:function(){C(null),C(null),L([]),I(null)},inquiry:A})})]})};function J(){return fetch("./data").then((function(e){return e.json()}))}var H=function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(a.useState)(null),r=Object(d.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(0===t.length),s=Object(d.a)(o,2),u=s[0],l=s[1],f=Object(a.useState)(null),m=Object(d.a)(f,2),h=m[0],O=m[1];function v(){return p.apply(this,arguments)}function p(){return(p=Object(j.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(){l(!1)}return Object(a.useEffect)((function(){l(!0),v().then(O).catch(i).then(x)}),t),Object(a.useMemo)((function(){return{error:c,fetching:u,response:h}}),[c,u,h])}(J);return Object(a.useEffect)((function(){console.log(e)}),[e]),Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)("header",{children:Object(o.jsx)("div",{class:"header-text",children:"testing"})}),Object(o.jsxs)("main",{children:[e.fetching&&Object(o.jsx)(u,{}),e.error&&Object(o.jsx)(s,{}),e.response&&Object(o.jsx)(A,{csrfToken:"",submitPath:"./build",factories:e.response})]})]})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(H,{})}),document.getElementById("root")),U()}},[[42,1,2]]]);
//# sourceMappingURL=main.a998e147.chunk.js.map